# 문제 리뷰

> [문제 링크](https://www.acmicpc.net/problem/12865)  
> [답안 코드](https://github.com/minSsan/algorithm/blob/main/baekjoon/%EB%8F%99%EC%A0%81%EA%B3%84%ED%9A%8D%EB%B2%95/12865.cpp)

## 그리디 ?

> 현재 상황에서 최선의 선택으로, 최선의 결과를 이끌어낼 수 있는 것

이 문제는 그리디로 오해할 수 있을만한 문제이기도 하다. _(실제 그리디 알고리즘 학습을 진행하다가 마주친 문제)_

그리디로 푼다고 가정하고,  
만약 현재 가방에 `m kg`의 공간이 남았을 경우, 어떤 보석을 넣는 것이 최선의 결과를 도출할 수 있을지 고민해보자.

크게 아래 세 가지 경우로 나눌 수 있을 것 같다.

```
1. 무게가 가벼운 것을 넣기
2. 가치가 높은 것을 넣기
3. 무게 대비 가치가 높은 것을 넣기
```

- 일단 첫 번째와 두 번째는 성립할 수 없음을 바로 알 수 있다.  
  **무게가 가볍다고 해서 가치가 높다는 보장이 없고, 그 반대도 마찬가지**기 때문이다.

- 세 번째의 경우 어느정도 타당한 방안이긴 하지만, 무게 대비 가치가 높다고 해서 가장 최선의 선택 _(= 현재 남은 무게에 넣을 수 있는 최대 가치)_ 이라는 보장을 할 수 없다.
  - (반례) **2kg 공간**이 남았을 때, `무게 = 1kg | 가치 = 2`인 물건과 `무게 = 2kg | 가치 = 3`인 물건이 존재할 때  
    👉🏻 `(가치/무게) 값`은 첫 번째 물건이 `2`로 더 크지만, 실제로는 두 번째 물건을 넣는 것이 더 합리적하다.

## 쪼갤 수 있는 배낭문제 - 그리디

쪼갤 수 있는 배낭문제의 경우 그리디로 풀 수 있다고 한다.

_이 문제도 곧 풀어봐야겠다 ..._

## 쪼갤 수 없는 배낭문제 - DP

하지만 이 문제는 `쪼갤 수 없는 배낭문제(DP)`에 해당한다.

- DP는 큰 문제를 작은 문제로 나눌 수 있을 때 사용한다.

그렇다면 이 배낭문제를 작은 문제로 나눌 수 있을지 먼저 확인해봐야 한다.

```
[ 큰 문제 ]

만약 현재 가방에 m kg의 공간이 남아있는 경우, 남은 물건 중에서 어느 물건들을 넣어야 하는가?
```

일단 앞서 살펴봤듯이 **물건의 무게와 가치는 어떠한 연관성도 갖지 않는다.**

따라서 이 문제를 해결하려면, 결국 남아있는 물건을 모두 다 넣어서 확인할 수 밖에 없을 것이다.

- 👉🏻 N개의 물건을 각각 넣을지 말지 결정해야 하므로, 완전탐색을 한다면 시간복잡도는 `2^N`이고 당연히 시간초과가 난다.

  ```
  ⭐️ 이처럼 완전탐색이 필요하지만, 시간초과가 우려되는 경우에는 `"메모이제이션"`을 떠올릴 수 있어야 한다고 했다.
  ```

### 메모이제이션

> `특정 물건을 가방에 포함하는 경우`와 `포함하지 않는 경우`를 비교하고, 둘 중 더 최대 가치를 얻을 수 있는 경우의 값으로 반영한다.

여기서 변수 값은 `가방의 무게`와 `가방에 넣을 물건`이 된다.

- `가방의 무게`에 따라 얻을 수 있는 최대 가치를 계산 _(<- `가방에 어떤 물건들`을 넣을지에 따라 결정)_

```
dp[w][i]: i번째 물건까지 고려했을 때, w kg짜리 가방으로 얻을 수 있는 최대 가치
```

그리고 점화식은 아래와 같다.

```
dp[w][i+1] = max(dp[w][i], dp[w - (i+1)번째 물건 무게][i+1])
```

> `W kg`의 가방에 `(i+1)번째 물건`을 넣는 순간, 이 문제는 `(W - w[i+1])kg` 가방에 넣을 수 있는 최대 가치를 구하는 문제와 동일해진다.
>
> ⚠️ 단, `(i+1)번째 물건`까지 고려한 상황이므로 **하위 문제 또한 `(i+1)번째 물건`까지만 고려해야** 한다.

## 리뷰

`가방 무게를 dp 변수로 설정하는 것`까지는 어찌저찌 혼자 했는데, `몇 번째 가방까지 고려했는지`를 변수로 설정하는 것은 결국 스스로 해결하지 못했다.

메모이제이션 문제가 보통 이번 문제처럼 **"몇 번째까지 고려 대상인가"** 를 `dp 변수`에 포함하는 경우가 꽤 많은 것 같다.  
👉🏻 이러한 메모이제이션 유형의 문제에 좀 더 많이 익숙해질 필요가 있어보인다 ...
